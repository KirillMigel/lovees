# Настройки аккаунта

## Функции

### ✅ Экспорт данных
- **API**: `GET /api/account/export`
- **Формат**: JSON файл с полными данными пользователя
- **Включает**: профиль, фото, свайпы, матчи, сообщения, репорты, блокировки
- **Статистика**: общие счетчики активности

### ✅ Удаление аккаунта
- **API**: `POST /api/account/delete {confirmation, password}`
- **Подтверждение**: требуется ввести "DELETE_ACCOUNT"
- **Пароль**: проверка для не-OAuth пользователей
- **Каскадное удаление**: все связанные данные удаляются

### ✅ Правовые страницы
- **Privacy**: `/privacy` - политика конфиденциальности
- **Terms**: `/terms` - условия использования
- **Содержание**: права пользователей, защита данных, ответственность

### ✅ Rate Limiting
- **Свайпы**: 100 в сутки на пользователя
- **Репорты**: 10 в сутки на пользователя  
- **Блокировки**: 50 в сутки на пользователя
- **Сообщения**: 1000 в час на пользователя

## API Endpoints

### Экспорт данных
```bash
GET /api/account/export
Authorization: Bearer <token>
Response: JSON file download
```

### Удаление аккаунта
```bash
POST /api/account/delete
{
  "confirmation": "DELETE_ACCOUNT",
  "password": "user_password"
}
```

## Rate Limiting

### Настройки лимитов:
- **Swipe**: 24 часа, 100 запросов
- **Report**: 24 часа, 10 запросов
- **Block**: 24 часа, 50 запросов
- **Message**: 1 час, 1000 запросов

### Ответ при превышении:
```json
{
  "error": "Превышен лимит запросов",
  "limit": 100,
  "remaining": 0,
  "retryAfter": 3600
}
```

### Headers:
- `X-RateLimit-Limit`: максимальное количество запросов
- `X-RateLimit-Remaining`: оставшиеся запросы
- `X-RateLimit-Reset`: время сброса лимита
- `Retry-After`: секунды до следующего запроса

## Безопасность

- **Проверка пароля**: для удаления аккаунта
- **Подтверждение**: двойное подтверждение удаления
- **Rate limiting**: защита от злоупотреблений
- **Валидация**: Zod схемы для всех входных данных

## Использование

### Страница настроек: `/settings`
- Экспорт данных в один клик
- Удаление аккаунта с подтверждением
- Ссылки на правовые документы
- Информация об аккаунте

### В продакшене:
- Замените in-memory rate limiting на Redis
- Настройте автоматическое удаление файлов из S3
- Добавьте логирование действий пользователей
